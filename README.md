## **myFUS: Custom software application for cUSBr-Patch longitudinal study**

myFUS (mirror-my-First-UltraSound) is a custom software application created to help patients repeatedly position the ultrasound probe (cUSBr) at the correct location on their breast. This computer vision application assists the user in placing the probe at the same location during the course of the longitudinal clinical study in order to generate high-quality ultrasound images of the tumour through the same ‘imaging window’ on their body - removing the inevitable variability and subjectivity in image datasets generated by human operators or medical personnel. 

The software uses a webcam to create a mirror image of the user on a digital screen, and overlays markers and guiding directions on the image to help the patient align the probe at the correct location and viewing angle relative to the tumour as captured in the first imaging session. The software uses an aruco marker and automated skin thresholding to localize the probe on the body. The main sub-modules of the application are described below:

<br>

**1. One time calibration for new user**

The user can start-up the application and add their name and patient details to create a new profile (under an assigned username and passkey) within the protected database of the software. 

**1.1 Skin thresholding and mask creation:** On starting up the webcam, the user is prompted to sit back in the chair in a comfortable position, and hold still for 2-5 seconds during which the application runs a k-means clustering algorithm to automatically detect the skin tone and create a mask of the same. The webcam is positioned such that the field of view does not include the patients face. This mask serves as a template silhouette within which the patient can approximately locate and adjust their posture and position relative to the webcam for subsequent trials (accuracy > 2 cm). 

**1.2  Distance calibration:** Seated within this mask, the user is then prompted to lay the probe head as flat as possible on the sternum. An aruco marker is inscribed on the probehad and must remain clearly visible to the webcam at all times. The webcam then calculates the distance of the user from the webcam, and saves this information as the base position. 

**1.3  Determining imaging windows:** With the assistance of a clinician, the user then locates the tumour in their breast using ultrasound. Once the tumour is clearly visible in the ultrasound image, the user can save this location of the probehead on the body using a button-press on myFUS. 2 to 3 additional locations can be saved from alternate viewing angles to ensure that a sufficiently accurate 3D map of the tumour can be reconstructed. 

**1.4. Save and quit:** Once the window locations through the webcam and corresponding ultrasound images have been saved, the user can exit the application. The data will be read- and write- protected on the local server at the CRC. The patient can access their profile for subsequent trials using their username and passkey. 

<br>

**2. Weekly use**

The patient can log into their myFUS profile using the username and passkey. 

**2.1 Mask alignment:** Similar to the steps described above, the user first approximately aligns themselves within the saved mask. The software will report a % overlap score of the individual with the saved mask. The user is allowed to proceed if this score is > 90 %. 

**2.2 Base position alignment:** Then, the user performs the base position distance calibration by placing the probehead flat on the sternum. The software will prompt the user to move towards or further away from the camera based on the calculated size of the aruco marker. The software will report a % overlap score of the probehead with the saved base position. The user is allowed to proceed if this score is > 95 %. 

**2.4. Imaging window alignment:** The software will overlay a graphic of the saved imaging windows on the webcam feed. The user must try to position the probehead as accurately as possible within these bounding boxes. The software will prompt the user if the probehead needs to be rotated or is in improper orientation. The software will report a % overlap score of the probehead with the saved imaging window. An ultrasound image is captured if this score is > 95 %. The user can then proceed to capture additional images through the other imaging windows in a similar fashion. 

**2.5. Save, view and quit:** Once the window locations through the webcam and corresponding ultrasound images have been saved, the user can view the collected images from that session. A time-series stack of the images is created and the patient can visually observe the images. The data will be read- and write- protected on the local server at the CRC. The patient can access their profile for subsequent trials using their username and passkey. 

<br>

**Data use and privacy:** 

**- Data analysis:** The data will be maintained on a password-protected local server under the PI. The masked webcam images with the probe in position and the corresponding ultrasound images will be used for qualitative and quantitative analysis, and will only be provided to the researchers signed on this protocol. The data will be anonymized under the numeric username assigned to the user. 

**- Use of photographs/ultrasound images:** The user can clearly indicate in their consent form if they would like to volunteer their webcam and/or ultrasound images for publications related to the work and findings. By default, the permission to use images for published works is denied. For users who volunteer their images, all facial or other bodily identifying features such as marks, spots, or scars will be removed prior to publication. The nipple, if still visible in the masked images, will be blurred out. A copy of the manuscript will be provided to the user prior to publication. The user may request modifications to the image at this time. Unless the image is in violation of the anonymising modifications listed above, the user is expected to grant their approval on the manuscript. 




